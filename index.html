<html>

<head>
  <title>ç”£ç·ç ” ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹æ¨™é«˜ã‚¿ã‚¤ãƒ«ï¼ˆé™¸åŸŸçµ±åˆDEMï¼‰+CSç«‹ä½“å›³</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://unpkg.com/maplibre-gl@4.5.0/dist/maplibre-gl.js"></script>
  <link href="https://unpkg.com/maplibre-gl@4.5.0/dist/maplibre-gl.css" rel="stylesheet" />
  <script src="https://unpkg.com/pmtiles@2.11.0/dist/index.js"></script>
  <script src="https://unpkg.com/@maplibre/maplibre-gl-geocoder@1.2.0/dist/maplibre-gl-geocoder.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/@maplibre/maplibre-gl-geocoder@1.2.0/dist/maplibre-gl-geocoder.css"
    type="text/css" />
  <style>
    body {
      margin: 0;
    }

    #map {
      height: 100%;
      width: 100%;
    }

    .map-overlay {
      font: bold 12px/14px "Helvetica Neue", Arial, Helvetica, sans-serif;
      position: absolute;
      width: 180px;
      bottom: 20px;
      left: 0;
      padding: 10px;
    }

    .map-overlay .map-overlay-inner {
      background-color: #fff;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
      border-radius: 3px;
      padding: 10px;
      margin-bottom: 10px;
    }

    .map-overlay label {
      display: block;
      margin: 0 0 0px;
      font-size: 12px;
      top: 100px;
      left: 10px;
      display: block;
      margin-bottom: 5px;
    }

    .map-overlay input {
      background-color: transparent;
      display: inline-block;
      width: 100%;
      position: relative;
      margin: 0;
      cursor: ew-resize;
    }

    .maplibregl-ctrl-geocoder {
      font-size: 14px;
      line-height: 12px;
      font-family: "Open Sans", "Helvetica Neue", Arial, Helvetica, sans-serif;
      position: relative;
      background-color: #fff;
      width: 80%;
      min-width: 100px;
      z-index: 1;
      border-radius: 5px;
      transition: width 0.25s, min-width 0.25s;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
    }

    .maplibregl-ctrl-geocoder .suggestions {
      font-size: 14px;
    }

    #info {
      padding: 6px 8px;
      font: 12px/14px Arial, Helvetica, sans-serif;
      color: navy;
      background: rgba(255, 255, 255, 0.8);
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
      border-radius: 5px;
      width: fit-content;
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 10;
    }

    .yubi {
      cursor: pointer;
      z-index: 10;
    }

    .checkbox-button-container {
      display: flex;
      flex-direction: column;
      justify-content: start;
    }

    .column {
      display: flex;
      flex-direction: column;
      margin-right: 20px;
    }

    .map-center-marker {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 30px;
      pointer-events: none;
    }

    .coords-display {
      position: absolute;
      font: bold 12px/14px "Helvetica Neue", Arial, Helvetica, sans-serif;
      bottom: 125px;
      left: 0px;
      margin: 10px;
      padding: 5px;
      background: rgba(255, 255, 255, 1);
      border-radius: 5px;
      font-size: 12px;
      z-index: 1;
    }
  </style>
</head>

<body>
  <div id="map"></div>
  <div class="map-center-marker">+</div>
  <div class="coords-display" id="coords"></div>
  <div id="info">
    <details>
      <summary class="yubi">
        <strong>CSç«‹ä½“å›³</strong>
      </summary>
      <fieldset>
        <div class="checkbox-button-container">
          <div class="column">
            <div>
              <input type="checkbox" id="fukushima-cs" value="fukushima-cs" />
              <label for="fukushima-cs">ç¦å³¶çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="tochigi-cs" value="tochigi-cs" />
              <label for="tochigi-cs">æ ƒæœ¨çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="tokyo-tama-cs" value="tokyo-tama-cs" />
              <label for="toyko-tama-cs">æ±äº¬éƒ½(å¤šæ‘©åœ°åŸŸ)CSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="tokyo-shima-cs" value="tokyo-shima-cs" />
              <label for="toyko-shima-cs">æ±äº¬éƒ½(å³¶ã—ã‚‡åœ°åŸŸ)CSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="kanagawa-cs" value="kanagawa-cs" checked/>
              <label for="kanagawa-cs">ç¥å¥ˆå·çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="noto-cs" value="noto-cs" />
              <label for="noto-cs">èƒ½ç™»(çŸ³å·çœŒ)CSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="nagano-cs" value="nagano-cs" />
              <label for="nagano-cs">é•·é‡çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="gifu-cs" value="gifu-cs" />
              <label for="gifu-cs">å²é˜œçœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="shizuoka-cs" value="shizuoka-cs" />
              <label for="shizuoka-cs">é™å²¡çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="osaka-cs" value="osaka-cs" />
              <label for="osaka-cs">å¤§é˜ªåºœCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="hyogo-cs" value="hyogo-cs" />
              <label for="hyogo-cs">å…µåº«çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="wakayama-cs" value="wakayama-cs" />
              <label for="wakayama-cs">å’Œæ­Œå±±çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="okayama-cs" value="okayama-cs" />
              <label for="okayama-cs">å²¡å±±çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="hiroshima-cs" value="hiroshima-cs" />
              <label for="hiroshima-cs">åºƒå³¶çœŒCSç«‹ä½“å›³(æ—é‡åº0.5m)</label>
            </div>
            <div>
              <input type="checkbox" id="hiroshima-05m-cs" value="hiroshima-05m-cs" />
              <label for="hiroshima-05m-cs">åºƒå³¶çœŒCSç«‹ä½“å›³(åºƒå³¶çœŒ0.5m)</label>
            </div>
            <div>
              <input type="checkbox" id="hiroshima-1m-cs" value="hiroshima-1m-cs" />
              <label for="hiroshima-1m-cs">åºƒå³¶çœŒCSç«‹ä½“å›³(åºƒå³¶çœŒ1m)</label>
            </div>
            <div>
              <input type="checkbox" id="ehime-cs" value="ehime-cs"/>
              <label for="ehime-cs">æ„›åª›çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="kochi-cs" value="kochi-cs" />
              <label for="kochi-cs">é«˜çŸ¥çœŒCSç«‹ä½“å›³</label>
            </div>
            <div>
              <input type="checkbox" id="kumamoto-oita-cs" value="kumamoto-oita-cs" />
              <label for="kumamoto-oita-cs">ç†Šæœ¬çœŒãƒ»å¤§åˆ†çœŒCSç«‹ä½“å›³</label>
            </div>
          </div>
        </div>
      </fieldset>
      <summary class="yubi">
        <strong>å„ç¨®ãƒ¬ã‚¤ãƒ¤ãƒ¼</strong>
      </summary>
      <fieldset>
        <div class="checkbox-button-container">
          <div class="column">
            <div>
              <input type="checkbox" id="landslide" value="landslide" />
              <label for="landslide">åœ°ã™ã¹ã‚Šåœ°å½¢åˆ†å¸ƒå›³</label>
              <label id="open-legend-landslide" style="text-decoration: underline; cursor: pointer">å‡¡ä¾‹</label>
            </div>
            <div>
              <input type="checkbox" id="plateau-lod1" value="plateau-lod1" checked />
              <label for="plateau-lod1">3Déƒ½å¸‚ãƒ¢ãƒ‡ãƒ«PLATEAUå»ºç‰©LOD1(123éƒ½å¸‚)</label>
            </div>
          </div>
        </div>
      </fieldset>
    </details>
  </div>
  <div class="map-overlay top">
    <div class="map-overlay-inner">
      <label>CSç«‹ä½“å›³ ä¸é€æ˜åº¦:
        <span id="cs-slider-opacity-value">100%</span></label>
      <input id="cs-slider-opacity" type="range" min="0" max="100" step="1" value="100" />
      <label>é™°å½±èµ·ä¼å›³ ä¸é€æ˜åº¦:
        <span id="hillshade-slider-opacity-value">0%</span></label>
      <input id="hillshade-slider-opacity" type="range" min="0" max="100" step="1" value="0" />
    </div>
  </div>
  <script type="module">
    // addProtocolã®è¨­å®š
    let protocol = new pmtiles.Protocol();
    maplibregl.addProtocol('pmtiles', (request) => {
      return new Promise((resolve, reject) => {
        const callback = (err, data) => {
          if (err) {
            reject(err);
          } else {
            resolve({ data });
          }
        };
        protocol.tile(request, callback);
      });
    });

    // ãƒãƒƒãƒ—ã®åˆæœŸåŒ–
    const map = new maplibregl.Map({
      container: "map",
      style: "std.json",
      zoom: 9.82,
      minZoom: 1,
      maxZoom: 23,
      pitch: 64,
      bearing: -106.2,
      maxPitch: 85,
      center: [139.3825, 35.3989],
      hash: true,
      attributionControl: false,
    });

    //ã‚¸ã‚ªã‚³ãƒ¼ãƒ€ãƒ¼ï¼ˆå›½åœŸåœ°ç†é™¢ åœ°åæ¤œç´¢APIï¼‰
    var geocoder_api = {
      forwardGeocode: async (config) => {
        const features = [];
        const Text_Prefix = config.query.substr(0, 3);
        try {
          let request =
            "https://msearch.gsi.go.jp/address-search/AddressSearch?q=" +
            config.query;
          const response = await fetch(request);
          const geojson = await response.json();

          for (var i = 0; i < geojson.length; i++) {
            if (geojson[i].properties.title.indexOf(Text_Prefix) !== -1) {
              let point = {
                type: "Feature",
                geometry: {
                  type: "Point",
                  coordinates: geojson[i].geometry.coordinates,
                },
                place_name: geojson[i].properties.title,
                properties: geojson[i].properties,
                text: geojson[i].properties.title,
                place_type: ["place"],
                center: geojson[i].geometry.coordinates,
              };
              features.push(point);
            }
          }
        } catch (e) {
          console.error(`Failed to forwardGeocode with error: ${e}`);
        }
        return {
          features: features,
        };
      },
    };
    map.addControl(
      new MaplibreGeocoder(geocoder_api, { maplibregl: maplibregl }),
      "top-right"
    );

    // ã‚ºãƒ¼ãƒ ãƒ»å›è»¢
    map.addControl(new maplibregl.NavigationControl());

    // ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒ¢ãƒ¼ãƒ‰ã®ã‚ªãƒ³ã‚ªãƒ•
    map.addControl(new maplibregl.FullscreenControl());

    // ç¾åœ¨ä½ç½®è¡¨ç¤º
    map.addControl(
      new maplibregl.GeolocateControl({
        positionOptions: {
          enableHighAccuracy: false,
        },
        fitBoundsOptions: { maxZoom: 18 },
        trackUserLocation: true,
        showUserLocation: true,
      })
    );

    // ã‚¹ã‚±ãƒ¼ãƒ«è¡¨ç¤º
    map.addControl(
      new maplibregl.ScaleControl({
        maxWidth: 200,
        unit: "metric",
      })
    );

    // Attributionã‚’æŠ˜ã‚ŠãŸãŸã¿è¡¨ç¤º
    map.addControl(
      new maplibregl.AttributionControl({
        compact: true,
        customAttribution:
          'ï¼ˆ<a href="https://twitter.com/shi__works" target="_blank">Twitter</a> | <a href="https://github.com/shiwaku/aist-dem-with-cs-map-on-maplibre" target="_blank">Github</a>ï¼‰ ',
      })
    );

    // 3Dåœ°å½¢ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«è¡¨ç¤º
    map.addControl(
      new maplibregl.TerrainControl({
        source: 'aist-dem-terrain-rgb',
        exaggeration: 1 // æ¨™é«˜ã‚’å¼·èª¿ã™ã‚‹å€ç‡
      })
    );

    // ä¸­å¿ƒã®åº§æ¨™ã‚’è¡¨ç¤ºã™ã‚‹é–¢æ•°
    function updateCoordsDisplay() {
      var center = map.getCenter();
      var lat = center.lat.toFixed(5);
      var lng = center.lng.toFixed(5);
      document.getElementById("coords").innerHTML =
        "ä¸­å¿ƒåº§æ¨™: " +
        lat +
        ", " +
        lng +
        "<br>" +
        '<a href="https://www.google.com/maps?q=' +
        lat +
        "," +
        lng +
        '&hl=ja" target="_blank">ğŸŒGoogleMaps</a>' +
        " " +
        '<a href="https://www.google.com/maps/@?api=1&map_action=pano&viewpoint=' +
        lat +
        "," +
        lng +
        '&hl=ja" target="_blank">ğŸ“·StreetView</a>';
    }

    map.on("load", () => {
      // æ¨™é«˜ã‚¿ã‚¤ãƒ«ã‚½ãƒ¼ã‚¹
      map.addSource("aist-dem-terrain-rgb", {
        type: 'raster-dem',
        tiles: ['https://gsj-seamless.jp/seamless/elev/php/terrainRGB.php?url='
          + 'https://tiles.gsj.jp/tiles/elev/mixed/{z}/{y}/{x}.png',
        ],
        attribution: '<a href="https://tiles.gsj.jp/tiles/elev/tiles.html" target="_blank">ç”£ç·ç ” ã‚·ãƒ¼ãƒ ãƒ¬ã‚¹æ¨™é«˜ã‚¿ã‚¤ãƒ«(çµ±åˆDEM)</a>',
        tileSize: 256,
        maxzoom: 17
      });

      // æ¨™é«˜ã‚¿ã‚¤ãƒ«ã‚»ãƒƒãƒˆ
      map.setTerrain({ 'source': 'aist-dem-terrain-rgb', 'exaggeration': 1 });

      // 3Déƒ½å¸‚ãƒ¢ãƒ‡ãƒ«PLATEAUå»ºç‰©ï¼ˆPMTilesï¼‰ã‚½ãƒ¼ã‚¹
      map.addSource("plateau-lod1", {
        type: "vector",
        url: "pmtiles://https://shiworks.xsrv.jp/pmtiles-data/plateau/PLATEAU_2022_LOD1.pmtiles",
        minzoom: 16,
        maxzoom: 16,
        attribution:
          '<a href="https://www.geospatial.jp/ckan/dataset/plateau">å›½åœŸäº¤é€šçœ 3Déƒ½å¸‚ãƒ¢ãƒ‡ãƒ«PLATEAUï¼ˆå»ºç‰©ãƒ‡ãƒ¼ã‚¿LOD1ï¼‰</a>',
      });

      // 3Déƒ½å¸‚ãƒ¢ãƒ‡ãƒ«PLATEAUå»ºç‰©ï¼ˆPMTilesï¼‰ãƒ¬ã‚¤ãƒ¤
      map.addLayer({
        id: "plateau-lod1",
        source: "plateau-lod1",
        "source-layer": "PLATEAU",
        minzoom: 14,
        maxzoom: 23,
        type: "fill-extrusion",
        layout: {
          visibility: "visible",
        },
        paint: {
          "fill-extrusion-color": "#FFFFFF",
          "fill-extrusion-opacity": 0.7,
          "fill-extrusion-height": ["get", "measuredHeight"],
        },
      });

      // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼CSç«‹ä½“å›³ã®ä¸é€æ˜åº¦ã‚’åˆ¶å¾¡
      const cs_sliderOpactiy = document.getElementById("cs-slider-opacity");
      const cs_sliderOpactiyValue = document.getElementById(
        "cs-slider-opacity-value"
      );

      cs_sliderOpactiy.addEventListener("input", (e) => {
        map.setPaintProperty(
          "nagano-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "hiroshima-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "hiroshima-05m-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "hiroshima-1m-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "okayama-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "ehime-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "kochi-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "fukushima-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "kumamoto-oita-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "hyogo-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "tochigi-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "shizuoka-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "gifu-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "osaka-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "noto-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "tokyo-tama-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "tokyo-shima-01-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "tokyo-shima-02-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "tokyo-shima-03-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "tokyo-shima-04-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "tokyo-shima-05-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "tokyo-shima-06-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "wakayama-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        map.setPaintProperty(
          "kanagawa-cs",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        cs_sliderOpactiyValue.textContent = e.target.value + "%";
      });

      // ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã§é™°å½±èµ·ä¼å›³ã®ä¸é€æ˜åº¦ã‚’åˆ¶å¾¡
      const hillshade_sliderOpactiy = document.getElementById(
        "hillshade-slider-opacity"
      );
      const hillshade_sliderOpactiyValue = document.getElementById(
        "hillshade-slider-opacity-value"
      );

      hillshade_sliderOpactiy.addEventListener("input", (e) => {
        map.setPaintProperty(
          "hillshade",
          "raster-opacity",
          parseInt(e.target.value, 10) / 100
        );
        hillshade_sliderOpactiyValue.textContent = e.target.value + "%";
      });

      map.showTileBoundaries = false;

      updateCoordsDisplay(); // åˆæœŸåº§æ¨™ã‚’è¡¨ç¤º
    });

    // ============================== ãƒ¬ã‚¤ãƒ¤ã®è¡¨ç¤ºãƒ»éè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆåˆ¶å¾¡ ==============================

    // ãƒ¬ã‚¤ãƒ¤è¡¨ç¤ºãƒ»éè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆé–¢æ•°
    function toggleMapLayerVisibility(checkboxId, layerId) {
      if (checkboxId != "tokyo-shima-cs") {
        document
          .getElementById(checkboxId)
          .addEventListener("change", function (e) {
            map.setLayoutProperty(
              layerId,
              "visibility",
              e.target.checked ? "visible" : "none"
            );
          });
      } else {
        document
          .getElementById(checkboxId)
          .addEventListener("change", function (e) {
            map.setLayoutProperty(
              "tokyo-shima-01-cs",
              "visibility",
              e.target.checked ? "visible" : "none"
            );
            map.setLayoutProperty(
              "tokyo-shima-02-cs",
              "visibility",
              e.target.checked ? "visible" : "none"
            );
            map.setLayoutProperty(
              "tokyo-shima-03-cs",
              "visibility",
              e.target.checked ? "visible" : "none"
            );
            map.setLayoutProperty(
              "tokyo-shima-04-cs",
              "visibility",
              e.target.checked ? "visible" : "none"
            );
            map.setLayoutProperty(
              "tokyo-shima-05-cs",
              "visibility",
              e.target.checked ? "visible" : "none"
            );
            map.setLayoutProperty(
              "tokyo-shima-06-cs",
              "visibility",
              e.target.checked ? "visible" : "none"
            );
          });
      }
    }

    // ãƒ¬ã‚¤ãƒ¤è¡¨ç¤ºãƒ»éè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆåˆ¶å¾¡
    // CSç«‹ä½“å›³
    toggleMapLayerVisibility("fukushima-cs", "fukushima-cs");
    toggleMapLayerVisibility("tochigi-cs", "tochigi-cs");
    toggleMapLayerVisibility("tokyo-tama-cs", "tokyo-tama-cs");
    toggleMapLayerVisibility("tokyo-shima-cs", "tokyo-shima-cs");
    toggleMapLayerVisibility("kanagawa-cs", "kanagawa-cs");
    toggleMapLayerVisibility("noto-cs", "noto-cs");
    toggleMapLayerVisibility("nagano-cs", "nagano-cs");
    toggleMapLayerVisibility("gifu-cs", "gifu-cs");
    toggleMapLayerVisibility("shizuoka-cs", "shizuoka-cs");
    toggleMapLayerVisibility("osaka-cs", "osaka-cs");
    toggleMapLayerVisibility("hyogo-cs", "hyogo-cs");
    toggleMapLayerVisibility("wakayama-cs", "wakayama-cs");
    toggleMapLayerVisibility("okayama-cs", "okayama-cs");
    toggleMapLayerVisibility("hiroshima-cs", "hiroshima-cs");
    toggleMapLayerVisibility("hiroshima-05m-cs", "hiroshima-05m-cs");
    toggleMapLayerVisibility("hiroshima-1m-cs", "hiroshima-1m-cs");
    toggleMapLayerVisibility("ehime-cs", "ehime-cs");
    toggleMapLayerVisibility("kochi-cs", "kochi-cs");
    toggleMapLayerVisibility("kumamoto-oita-cs", "kumamoto-oita-cs");
    toggleMapLayerVisibility("plateau-lod1", "plateau-lod1");
    toggleMapLayerVisibility("landslide", "landslide");

    /*
          // å„ç¨®ãƒ¬ã‚¤ãƒ¤ãƒ¼
          toggleMapLayerVisibility('landslide', 'landslide');
          */

    // åœ°å›³ãŒç§»å‹•ã—ãŸã‚‰ä¸­å¿ƒã®åº§æ¨™ã‚’æ›´æ–°
    map.on("move", function () {
      updateCoordsDisplay(); // åº§æ¨™ã‚’æ›´æ–°
    });

    // åœ°ã™ã¹ã‚Šåœ°å½¢åˆ†å¸ƒå›³å‡¡ä¾‹

    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’è¿½åŠ 
    document.addEventListener("DOMContentLoaded", () => {
      document
        .getElementById("open-legend-landslide")
        .addEventListener("click", OpenLegendRoad);
    });

    function OpenLegendRoad() {
      // å‡¡ä¾‹ã®å†…å®¹ã‚’å«ã‚€ã‚¦ã‚§ãƒ–ãƒšãƒ¼ã‚¸ã®URL
      var legendUrl = "./PNG/legend-landslide.png";

      // æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã
      window.open(legendUrl, "Legend", "width=1800,height=1200");
    }
  </script>
</body>

</html>